<% include adminheader.ejs %>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/css-toggle-switch/latest/toggle-switch.css" />
<div class="top"><h2>Modules</h2></div>
<div class="main">
<% if (isSub != true) { %>
<h2>Module settings: <%= moduleInfo[0].type %></h2>
<p>
  <table class="moduleTable">
    <tr>
      <th>Module</th>
      <th>State</th>
      <th>Description</th>
      <th>Change</th>
    </tr>
  <% moduleInfo.forEach(function(moduleInfo) { %>
    <tr>
      <td><%= moduleInfo.shortName %></td>
      <td><% if (moduleInfo.state == "1") { %> <span style="color: green;">On</span> <% } else { %> <span style="color: red;">Off</a> <% } %></td>
      <td><%= moduleInfo.moduleDescription %></td>
      <td>
      <button onclick="disableModule('<%= moduleInfo.moduleName %>')">Disable</button>
      <button onclick="enableModule('<%= moduleInfo.moduleName %>')">Enable</button>
      <a href="/admin/modules/<%= moduleInfo.moduleName %>"><button>Settings</button></a>
      </td>
    </tr>
  <% }); %>
  </table>
</p>
<% } else { %>
<h2>Module settings: <%= type %></h2>
<p>
<% if (type == "songrequest") { %>

  Sub-only songrequest
  <div class="onoffswitch">
    <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox modSwitch" id="srSub" <% if (moduleInfo[0].value == "1") { %> checked <% } else { %>  <% } %> >
    <label class="onoffswitch-label" for="srSub"></label>
  </div><br>

  Max songs in queue <br>
  <input type="number" min=1 max=10 size=4 id="srMaxSong" value=<%= moduleInfo[1].value %>><br><br>

  Max songlength (in seconds) <br>
  <input type="number" min=60 max=3600 size=4 id="srMaxLength" value=<%= moduleInfo[2].value %>><br><br>

<% } else if (type == "roulette") { %>
  MIN ROULETTE
  COOLDOWN
<% } else if (type == "slot") { %>
  COOLDOWN
<% } else if (type == "dungeon") { %>
  MIN PARTICIPANTS
  *MORE TO CUM*
<% } else if (type == "updatePoints") { %>
  POINT INTERVAL
  POINTS PER INTERVAL
<% } else if (type == "subNotif") { %>
  NOTIF MESSAGE
<% } else if (type == "linkMod") { %>
  TIMEOUT TIME
  PERMIT COMM
<% } else if (type == "clrComm") { %>
  COST PER TYPE
  COOLDOWN
<% } else if (type == "clrSub") { %>
  This feature has not yet been implemented
  <!-- MESSAGE
  IMAGE
  SOUND
  MONTH MODIFIER -->
<% } else { %>
  No futher settings available at the moment.
<% } %>

<button id="modChange">Update module</button>

<p id="showText"></p>
<!-- THIS IS A SHITTY LOOKING MODAL, UPDATE WHEN YOU ADD BOOTSTRAP PLEASE -->

</p>
<% } %>
</div>
<script type="text/javascript" src="/../js/yucisite.js"></script>
<script type="text/javascript" src="/../js/modules.js"></script>
</body>
