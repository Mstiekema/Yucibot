<% include ../header.ejs %>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/css-toggle-switch/latest/toggle-switch.css" />
<div class="main">
<% if (isSub != true) { %>
<h2>Module settings: <%= moduleInfo[0].type %></h2>
<p>
  <table class="table moduleTable">
    <tr>
      <th>Module</th>
      <th>Description</th>
      <th>Change</th>
    </tr>
  <% moduleInfo.forEach(function(moduleInfo) { %>
    <tr>
      <td><%= moduleInfo.shortName %></td>
      <td><%= moduleInfo.moduleDescription %></td>
      <td>
      <input type="checkbox" id="<%=moduleInfo.moduleName%>" class="moduleSwitch" name="checkbox" <% if (moduleInfo.state == "1") { %> checked<% } else { %>  <% } %>>
      <a href="<%= moduleInfo.moduleName %>"><button class="btn btn-info">Settings</button></a>
      </td>
    </tr>
  <% }); %>
  </table>
</p>
<% } else { %>
<h2>Module settings: <%= type %></h2>
<p>
<% if (type == "songrequest") { %>

  <form class="pure-form">
  Sub-only songrequest<br>
  <input type="checkbox" id="srSub" name="checkbox" <% if (moduleInfo[0].value == "1") { %> checked<% } else { %>  <% } %>><br><br>

  Max songs in queue <br>
  <input class="pure-input" type="number" min=1 max=10 size=4 id="srMaxSong" value="<%= moduleInfo[1].value %>"><br><br>

  Max songlength (in seconds) <br>
  <input type="number" min=60 max=3600 size=4 id="srMaxLength" value="<%= moduleInfo[2].value %>"></form><br>

  <button class="pure-button" id="modChange">Update module</button>

<% } else if (type == "roulette") { %>

  <form class="pure-form">
  Minimum amount of points for roulette <br>
  <input type="number" min=1 size=4 id="roulMin" value="<%= moduleInfo[0].value %>"><br><br>

  Cooldown (in seconds) <br>
  <input type="number" min=10 max=3600 size=4 id="roulCd" value="<%= moduleInfo[1].value %>"></form><br>

  <button class="pure-button" id="modChange">Update module</button>

<% } else if (type == "slot") { %>

  <form class="pure-form">
  Cooldown (in seconds) <br>
  <input type="number" min=10 max=3600 size=4 id="slotCd" value="<%= moduleInfo[0].value %>"></form><br>

  <button class="pure-button" id="modChange">Update module</button>

<% } else if (type == "dungeon") { %>

  Work in progress, more will be added in V1.4

<% } else if (type == "updatePoints") { %>

  <form class="pure-form">
  Points per interval <br>
  <input type="number" min=1 max=100 size=4 id="amountPoints" value="<%= moduleInfo[0].value %>"></form><br>

  <button class="pure-button" id="modChange">Update module</button>

<% } else if (type == "subNotif") { %>

  <form class="pure-form">
  New subcribers message <br>
  <i>[username] = sub name, is a requirement in the sub message</i> <br>
  <input type="text" id="subMsg" size=450 value="<%= moduleInfo[0].message %>"><br><br>

  Resubscriber message <br>
  <i>[username] = sub name & [months] = number of months, are a requirement in the resub message</i><br>
  <input type="text" id="resubMsg" size=450 value="<%= moduleInfo[1].message %>"></form><br>

  <button class="pure-button" id="modChange">Update module</button>

<% } else if (type == "linkMod") { %>

  <form class="pure-form">
  Allow subs to post links <br>
  <input type="checkbox" id="linkSubOnly" name="checkbox" <% if (moduleInfo[0].value == "1") { %> checked<% } else { %>  <% } %>><br><br>

  Timeout for posting links (in seconds) <br>
  <input type="number" min=1 max=600 size=4 id="linkTimeoutTime" value="<%= moduleInfo[1].value %>"></form><br>

  <button class="pure-button" id="modChange">Update module</button>

<% } else if (type == "clrComm") { %>

  <form class="pure-form">
  Cost per CLR command <br>
  <input type="number" min=1 max=1000000 size=4 id="clrCost" value="<%= moduleInfo[0].value %>"><br><br>

  Cooldown (in seconds) <br>
  <input type="number" min=1 max=3600 size=4 id="clrCd" value="<%= moduleInfo[1].value %>"></form><br>

  <button class="pure-button" id="modChange">Update module</button>

<% } else if (type == "clrSub") { %>
  This feature has not yet been implemented
  <!-- MESSAGE
  IMAGE
  SOUND
  MONTH MODIFIER -->
<% } else { %>
  No futher settings available at the moment.
<% } %>

<br><br>
<div class="alert alert-success hidden" id="succesMsg">
  <strong>Success!</strong> The module has been updated! <span class="close">&times;</span>
</div>
</p>
<% } %>
</div>
<script type="text/javascript" src="/../js/yucisite.js"></script>
<script type="text/javascript" src="/../js/modules.js"></script>
</body>
